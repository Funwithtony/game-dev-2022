<h6> Version 0.0.1 </h6>

<style>
  .wrapper {
    width: var(--screenwidth);
    height: var(--screenheight);
  }

  root {
    --screenheight: 100px;
    --screenwidth: 100px;
  }
</style>

<script>
  
    
  
  function myObsMovement() {
      // This function is called for every block on screen and is moves the block left across the screen from the right
      // to the left.  The block is moved by changing the left property of the block's style.
      // The block is moved by changing the left property of the block's style.
      for (var i = 0; i < myObs.length; i++) {
        myObs[i].style.left = (parseInt(myObs[i].style.left) - 2.5) + 'px';
      }

      //a loop that goes through every spawned object and checks it's hitbox
      for (var i = 0; i < myObs.length; i++) {
        //checks if the object is off screen
        if (parseInt(myObs[i].style.left) < -100) {
          //if it is, it removes the object from the screen
          myObs[i].remove();
          //and removes it from the array
          myObs.splice(i, 1);
        }
      }

      //check each array of the object for collision
      for (var i = 0; i < myObs.length; i++) {
        //check if the object is colliding with the player
        if (myHitOther(myImg01, myObs[i])) {
          alert('you lose')  
          document.getElementById('myImg01').style.left = '20px'
        }
      }


    }

  function myObsSpawn() {
    // This function is called every 1.5 seconds and creates a new block and adds it to the screen.
    // The block is created by creating a new div element and setting its style.
    // The block is added to the screen by adding it to the wrapper div.
    var newObs = document.createElement('div');
    newObs.style.position = 'absolute';
    newObs.style.bottom = '0px';
    newObs.style.left = (parseFloat(window.innerWidth) - (parseFloat(window.innerWidth) * 0.1))  + 'px';
    newObs.style.right = '0px';
    newObs.style.width = '100px';
    newObs.style.height = Math.floor(Math.random() * (300 - 150 + 1) + 150) + 'px';
    newObs.style.backgroundColor = 'red';
    newObs.style.zIndex = '1';
    wrapper.appendChild(newObs);
    myObs.push(newObs);
    console.log(myObs)
  }

  //onload calls myObsSpawn every 1.5 seconds
  window.onload = function() {
    setInterval(myObsSpawn, 2600);
    setInterval(myObsMovement, 10);
  }
  


    // global variables here
    let myGlobalX = 0
    let myClock
    let myObs = []
 
  //Some special shit for a keypress register
  

  document.addEventListener("keypress", function(event) {
    if (event.key == 'd') {
      document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px'
      myCheckHit()     // checks for all collisions
      console.log("d")
    }
  });

  document.addEventListener("keypress", function(event) {
    if (event.key == 'w') {

      document.getElementById('myImg01').style.bottom = parseInt(document.getElementById('myImg01').style.bottom) + 10 + 'px'
      myCheckHit()     // checks for all collisions
      console.log("w")
    }
  });

  document.addEventListener("keypress", function(event) {
    if (event.key == 'a') {
      document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 10 + 'px'
      myCheckHit()     // checks for all collisions
      console.log("a")
    }
  });


  document.addEventListener("keypress", function(event) {
    if (event.key == 's') {
      let bottom = parseInt(document.getElementById('myImg01').style.bottom)
      console.log(bottom)

      if (bottom <= 0) {
        document.getElementById('myImg01').style.bottom = 0
      } else{
      document.getElementById('myImg01').style.bottom = parseInt(document.getElementById('myImg01').style.bottom) - 10 + 'px'
      myCheckHit()     // checks for all collisions
      console.log("s")
      }
    }

  document.addEventListener("keypress", function(event) {
    if (event.keyCode == 13) {
      document.getElementById('myImg01').style.left = 50 + 'px'
      document.getElementById('myImg01').style.top = 0 + 'px'
      console.log("enter")
    }
  })


  });

    // global functions here
 function myHitOther(my1,my2){

    for (var i = 0; i < myObs.length; i++) {
      //checks if the hitbox of the player is colliding with the hitbox of the object
      if (my1.getBoundingClientRect().left < my2.getBoundingClientRect().right &&
        my1.getBoundingClientRect().right > my2.getBoundingClientRect().left &&
        my1.getBoundingClientRect().top < my2.getBoundingClientRect().bottom &&
        my1.getBoundingClientRect().bottom > my2.getBoundingClientRect().top) {
        //if it is, it returns true
        return true
      }
    
    }

    left1   = parseInt(document.getElementById(my1).style.left)
    right1  = left1 + parseInt(document.getElementById(my1).style.width)
    top1    = parseInt(document.getElementById(my1).style.bottom)   
    bottom1 = top1   + parseInt(document.getElementById(my1).style.height)
    left2   = parseInt(document.getElementById(my2).style.left)
    right2  = left2 + parseInt(document.getElementById(my2).style.width)
    top2    = parseInt(document.getElementById(my2).style.bottom)   
    bottom2 = top2   + parseInt(document.getElementById(my2).style.height)
    if ((right1  >=  left2  ) &&      	   
        (bottom1 >=  top2   ) &&
        (left1   <=  right2 ) &&
        (top1    <=  bottom2) ){
        return true
    }
    console.log("left1:", left1, "right1:", right1, "top1:", top1, "bottom1:", bottom1, "left2:", left2, "right2:", right2, "top2:", top2, "bottom2:", bottom2)
 }
 
 

 
 
    // more if statements here like the above
 
 
 
   // end of myCheckHit()
 
 function divset() {
    //takes the window size and sets --screenheight and --screenwidth to the window size
    var vx = parseFloat(window.innerWidth);
    var vy = parseFloat(window.innerHeight);
    document.documentElement.style.setProperty('--screenheight', vy + 'px');
    document.documentElement.style.setProperty('--screenwidth', vx + 'px');
    console.log("Width: " + vx, " Height: " + vy);
 }


</script>


<h1 align=center>t2a11 Game Template by David</h1>
<h1 align="center">Use WASD to move, enter to reset</h1>
<body id="myBody" style="background-repeat:repeat-x; background-size: 80%; background-color:lightblue;">
  <div id="wrapper" class="wrapper">
    <input type="button" value="log" onclick="{console.log(myObs)}">





    <img id="myImg01" style="position:absolute; width:150px; height:200px; bottom:0px; left:50px;"  src="run_jump_animation.gif">
    <img id="myImg02" style="position:absolute; width:200px; height:200px; bottom:0px; left:1000px;" src="opnbox.jpg">

  </div>

</body>
